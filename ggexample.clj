;; gorilla-repl.fileformat = 1

;; **
;;; # Geschichte-Gorilla Simple Example
;; **

;; @@
(ns mirthful-storm
  (:require [gorilla-repl.vega :as v]
            [geschichte-gorilla.core :as g]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def test-repo
    {:causal-order {10 []
                    20 [10]
                    30 [20]
                    40 [20]
                    50 [40]
                    60 [30 50]
                    70 [60]
                    80 [30]
                    90 [80]
                    100 [70 140]
                    110 [100]
                    120 [90]
                    130 [30]
                    140 [130]
                    150 [50]
                    160 [260]
                    170 [160 110]
                    180 [120]
                    190 [180]
                    200 [190]
                    210 [200]
                    220 [210]
                    230 [140]
                    240 [120 220]
                    250 [240]
                    260 [150]}
     :commits
     {10 "master"
      20 "master"
      30 "master"
      40 "fix"
      50 "fix"
      60 "master"
      70 "master"
      80 "dev"
      90 "dev"
      100 "master"
      110 "master"
      120 "dev"
      130 "fix-2"
      140 "fix-2"
      150 "fix"
      160 "fix"
      170 "master"
      180 "fix-dev"
      190 "fix-dev"
      200 "fix-dev"
      210 "fix-dev"
      220 "fix-dev"
      230 "fix-2"
      240 "dev"
      250 "dev"
      260 "fix"}
     :branches {"master" #{170}
                "fix" #{160}
                "dev" #{250}
                "fix-dev" #{220}
                "fix-2" #{230}}})
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;mirthful-storm/test-repo</span>","value":"#'mirthful-storm/test-repo"}
;; <=

;; @@
(v/vega-view (g/commit-graph test-repo))
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":30.0,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":20,"x":233.62022231146346,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":30,"x":367.3158160337164,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":60,"x":394.2635647062682,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":70,"x":442.0049293113146,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":100,"x":489.7465563755883,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":110,"x":529.8732350619034,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":170,"x":570.0,"y":185.41409301757812,"r":120,"g":77,"b":187},{"value":40,"x":303.5451061121516,"y":123.60939534505208,"r":171,"g":204,"b":29},{"value":50,"x":373.4702722659715,"y":123.60939534505208,"r":171,"g":204,"b":29},{"value":150,"x":422.6024100863976,"y":123.60939534505208,"r":171,"g":204,"b":29},{"value":260,"x":471.7347944127409,"y":123.60939534505208,"r":171,"g":204,"b":29},{"value":160,"x":520.8673538276306,"y":123.60939534505208,"r":171,"g":204,"b":29},{"value":80,"x":409.04128060131455,"y":61.80469767252606,"r":222,"g":101,"b":253},{"value":90,"x":450.7674511685678,"y":61.80469767252606,"r":222,"g":101,"b":253},{"value":120,"x":492.49453429454127,"y":61.80469767252606,"r":222,"g":101,"b":253},{"value":240,"x":528.2644809382753,"y":61.80469767252606,"r":222,"g":101,"b":253},{"value":250,"x":570.0,"y":61.80469767252606,"r":222,"g":101,"b":253},{"value":180,"x":498.4526959813757,"y":247.21879069010419,"r":28,"g":238,"b":12},{"value":190,"x":504.4122052125235,"y":247.21879069010419,"r":28,"g":238,"b":12},{"value":200,"x":510.3732172163434,"y":247.21879069010419,"r":28,"g":238,"b":12},{"value":210,"x":516.3357344094878,"y":247.21879069010419,"r":28,"g":238,"b":12},{"value":220,"x":522.2996076749548,"y":247.21879069010419,"r":28,"g":238,"b":12},{"value":130,"x":432.33860562871433,"y":309.0234883626302,"r":193,"g":35,"b":73},{"value":140,"x":497.3616769319805,"y":309.0234883626302,"r":193,"g":35,"b":73},{"value":230,"x":570.0,"y":309.0234883626302,"r":193,"g":35,"b":73}]},{"name":"links","values":[{"path":"M 30.000000447034836 185.41409301757812 L 233.62022638320923 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 233.62022638320923 185.41409301757812 L 367.3158288002014 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 367.3158288002014 185.41409301757812 L 394.26355361938477 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 394.26355361938477 185.41409301757812 L 442.00494289398193 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 442.00494289398193 185.41409301757812 L 489.7465467453003 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 489.7465467453003 185.41409301757812 L 529.873251914978 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 529.873251914978 185.41409301757812 L 569.9999928474426 185.41409301757812","r":120,"g":77,"b":187},{"path":"M 303.54509353637695 123.60939902889913 L 373.47028255462646 123.60939902889913","r":171,"g":204,"b":29},{"path":"M 373.47028255462646 123.60939902889913 L 422.60241508483887 123.60939902889913","r":171,"g":204,"b":29},{"path":"M 422.60241508483887 123.60939902889913 L 471.7347979545593 123.60939902889913","r":171,"g":204,"b":29},{"path":"M 471.7347979545593 123.60939902889913 L 520.8673596382141 123.60939902889913","r":171,"g":204,"b":29},{"path":"M 409.0412735939026 61.80469951444957 L 450.76743364334106 61.80469951444957","r":222,"g":101,"b":253},{"path":"M 450.76743364334106 61.80469951444957 L 492.49452352523804 61.80469951444957","r":222,"g":101,"b":253},{"path":"M 492.49452352523804 61.80469951444957 L 528.2644987106323 61.80469951444957","r":222,"g":101,"b":253},{"path":"M 528.2644987106323 61.80469951444957 L 569.9999928474426 61.80469951444957","r":222,"g":101,"b":253},{"path":"M 498.4527111053467 247.21879805779827 L 504.41222190856934 247.21879805779827","r":28,"g":238,"b":12},{"path":"M 504.41222190856934 247.21879805779827 L 510.37323474884033 247.21879805779827","r":28,"g":238,"b":12},{"path":"M 510.37323474884033 247.21879805779827 L 516.3357496261597 247.21879805779827","r":28,"g":238,"b":12},{"path":"M 516.3357496261597 247.21879805779827 L 522.2996234893799 247.21879805779827","r":28,"g":238,"b":12},{"path":"M 432.33861923217773 309.0234809949361 L 497.3616600036621 309.0234809949361","r":193,"g":35,"b":73},{"path":"M 497.3616600036621 309.0234809949361 L 569.9999928474426 309.0234809949361","r":193,"g":35,"b":73},{"path":"M 233.62022638320923 185.41409301757812 L 303.54509353637695 123.60939902889913","r":171,"g":204,"b":29},{"path":"M 367.3158288002014 185.41409301757812 L 409.0412735939026 61.80469951444957","r":222,"g":101,"b":253},{"path":"M 367.3158288002014 185.41409301757812 L 432.33861923217773 309.0234809949361","r":193,"g":35,"b":73},{"path":"M 492.49452352523804 61.80469951444957 L 498.4527111053467 247.21879805779827","r":28,"g":238,"b":12},{"path":"M 528.2644987106323 61.80469951444957 L 522.2996234893799 247.21879805779827","r":28,"g":238,"b":12},{"path":"M 394.26355361938477 185.41409301757812 L 373.47028255462646 123.60939902889913","r":171,"g":204,"b":29},{"path":"M 489.7465467453003 185.41409301757812 L 497.3616600036621 309.0234809949361","r":193,"g":35,"b":73},{"path":"M 569.9999928474426 185.41409301757812 L 520.8673596382141 123.60939902889913","r":171,"g":204,"b":29}]},{"name":"labels","values":[{"value":"master","x":570.0,"y":185.41409301757812},{"value":"fix","x":520.8673538276306,"y":123.60939534505208},{"value":"dev","x":570.0,"y":61.80469767252606},{"value":"fix-dev","x":522.2996076749548,"y":247.21879069010419},{"value":"fix-2","x":570.0,"y":309.0234883626302}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 30.0, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 20, :x 233.62022231146346, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 30, :x 367.3158160337164, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 60, :x 394.2635647062682, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 70, :x 442.0049293113146, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 100, :x 489.7465563755883, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 110, :x 529.8732350619034, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 170, :x 570.0, :y 185.41409301757812, :r 120, :g 77, :b 187} {:value 40, :x 303.5451061121516, :y 123.60939534505208, :r 171, :g 204, :b 29} {:value 50, :x 373.4702722659715, :y 123.60939534505208, :r 171, :g 204, :b 29} {:value 150, :x 422.6024100863976, :y 123.60939534505208, :r 171, :g 204, :b 29} {:value 260, :x 471.7347944127409, :y 123.60939534505208, :r 171, :g 204, :b 29} {:value 160, :x 520.8673538276306, :y 123.60939534505208, :r 171, :g 204, :b 29} {:value 80, :x 409.04128060131455, :y 61.80469767252606, :r 222, :g 101, :b 253} {:value 90, :x 450.7674511685678, :y 61.80469767252606, :r 222, :g 101, :b 253} {:value 120, :x 492.49453429454127, :y 61.80469767252606, :r 222, :g 101, :b 253} {:value 240, :x 528.2644809382753, :y 61.80469767252606, :r 222, :g 101, :b 253} {:value 250, :x 570.0, :y 61.80469767252606, :r 222, :g 101, :b 253} {:value 180, :x 498.4526959813757, :y 247.21879069010419, :r 28, :g 238, :b 12} {:value 190, :x 504.4122052125235, :y 247.21879069010419, :r 28, :g 238, :b 12} {:value 200, :x 510.3732172163434, :y 247.21879069010419, :r 28, :g 238, :b 12} {:value 210, :x 516.3357344094878, :y 247.21879069010419, :r 28, :g 238, :b 12} {:value 220, :x 522.2996076749548, :y 247.21879069010419, :r 28, :g 238, :b 12} {:value 130, :x 432.33860562871433, :y 309.0234883626302, :r 193, :g 35, :b 73} {:value 140, :x 497.3616769319805, :y 309.0234883626302, :r 193, :g 35, :b 73} {:value 230, :x 570.0, :y 309.0234883626302, :r 193, :g 35, :b 73}]} {:name \"links\", :values [{:path \"M 30.000000447034836 185.41409301757812 L 233.62022638320923 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 233.62022638320923 185.41409301757812 L 367.3158288002014 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 367.3158288002014 185.41409301757812 L 394.26355361938477 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 394.26355361938477 185.41409301757812 L 442.00494289398193 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 442.00494289398193 185.41409301757812 L 489.7465467453003 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 489.7465467453003 185.41409301757812 L 529.873251914978 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 529.873251914978 185.41409301757812 L 569.9999928474426 185.41409301757812\", :r 120, :g 77, :b 187} {:path \"M 303.54509353637695 123.60939902889913 L 373.47028255462646 123.60939902889913\", :r 171, :g 204, :b 29} {:path \"M 373.47028255462646 123.60939902889913 L 422.60241508483887 123.60939902889913\", :r 171, :g 204, :b 29} {:path \"M 422.60241508483887 123.60939902889913 L 471.7347979545593 123.60939902889913\", :r 171, :g 204, :b 29} {:path \"M 471.7347979545593 123.60939902889913 L 520.8673596382141 123.60939902889913\", :r 171, :g 204, :b 29} {:path \"M 409.0412735939026 61.80469951444957 L 450.76743364334106 61.80469951444957\", :r 222, :g 101, :b 253} {:path \"M 450.76743364334106 61.80469951444957 L 492.49452352523804 61.80469951444957\", :r 222, :g 101, :b 253} {:path \"M 492.49452352523804 61.80469951444957 L 528.2644987106323 61.80469951444957\", :r 222, :g 101, :b 253} {:path \"M 528.2644987106323 61.80469951444957 L 569.9999928474426 61.80469951444957\", :r 222, :g 101, :b 253} {:path \"M 498.4527111053467 247.21879805779827 L 504.41222190856934 247.21879805779827\", :r 28, :g 238, :b 12} {:path \"M 504.41222190856934 247.21879805779827 L 510.37323474884033 247.21879805779827\", :r 28, :g 238, :b 12} {:path \"M 510.37323474884033 247.21879805779827 L 516.3357496261597 247.21879805779827\", :r 28, :g 238, :b 12} {:path \"M 516.3357496261597 247.21879805779827 L 522.2996234893799 247.21879805779827\", :r 28, :g 238, :b 12} {:path \"M 432.33861923217773 309.0234809949361 L 497.3616600036621 309.0234809949361\", :r 193, :g 35, :b 73} {:path \"M 497.3616600036621 309.0234809949361 L 569.9999928474426 309.0234809949361\", :r 193, :g 35, :b 73} {:path \"M 233.62022638320923 185.41409301757812 L 303.54509353637695 123.60939902889913\", :r 171, :g 204, :b 29} {:path \"M 367.3158288002014 185.41409301757812 L 409.0412735939026 61.80469951444957\", :r 222, :g 101, :b 253} {:path \"M 367.3158288002014 185.41409301757812 L 432.33861923217773 309.0234809949361\", :r 193, :g 35, :b 73} {:path \"M 492.49452352523804 61.80469951444957 L 498.4527111053467 247.21879805779827\", :r 28, :g 238, :b 12} {:path \"M 528.2644987106323 61.80469951444957 L 522.2996234893799 247.21879805779827\", :r 28, :g 238, :b 12} {:path \"M 394.26355361938477 185.41409301757812 L 373.47028255462646 123.60939902889913\", :r 171, :g 204, :b 29} {:path \"M 489.7465467453003 185.41409301757812 L 497.3616600036621 309.0234809949361\", :r 193, :g 35, :b 73} {:path \"M 569.9999928474426 185.41409301757812 L 520.8673596382141 123.60939902889913\", :r 171, :g 204, :b 29}]} {:name \"labels\", :values [{:value \"master\", :x 570.0, :y 185.41409301757812} {:value \"fix\", :x 520.8673538276306, :y 123.60939534505208} {:value \"dev\", :x 570.0, :y 61.80469767252606} {:value \"fix-dev\", :x 522.2996076749548, :y 247.21879069010419} {:value \"fix-2\", :x 570.0, :y 309.0234883626302}]}]}}"}
;; <=

;; @@

;; @@
