;; gorilla-repl.fileformat = 1

;; **
;;; # Replikativ example
;; **

;; @@
(ns sunset-beach
  (:require [gorilla-repl.vega :as v]
            [geschichte-gorilla.core :as g]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; @@
(def test-repo
  (atom
    {:commit-graph {10 []}
     :commits
     {10 "A"}
     :branches {"A" #{10}}}))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;sunset-beach/test-repo</span>","value":"#'sunset-beach/test-repo"}
;; <=

;; @@
(defn plot-graph [repo]
  (v/vega-view (g/vega-commit-graph (:commit-graph repo) (:branches repo) (:commits repo)))
  )
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;sunset-beach/plot-graph</span>","value":"#'sunset-beach/plot-graph"}
;; <=

;; **
;;; Bare repo
;; **

;; @@
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":541.5,"y":176.1433883666992,"r":2,"g":53,"b":236}]},{"name":"links","values":[]},{"name":"node-labels","values":[{"value":10,"x":541.5,"y":176.1433883666992}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":176.1433883666992}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 541.5, :y 176.1433883666992, :r 2, :g 53, :b 236}]} {:name \"links\", :values []} {:name \"node-labels\", :values [{:value 10, :x 541.5, :y 176.1433883666992}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 176.1433883666992}]}]}}"}
;; <=

;; **
;;; Commit to branch "A"
;; **

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 20] [10]))
(swap! test-repo #(assoc-in % [:commits 20] "A"))
(swap! test-repo #(assoc-in % [:branches "A"] #{20}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":176.1433883666992,"r":101,"g":153,"b":234},{"value":20,"x":541.5,"y":176.1433883666992,"r":101,"g":153,"b":234}]},{"name":"links","values":[{"path":"M 28.500000424683094 176.1433883666992 L 541.4999932050705 176.1433883666992","r":101,"g":153,"b":234}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":176.1433883666992},{"value":20,"x":541.5,"y":176.1433883666992}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":176.1433883666992}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 176.1433883666992, :r 101, :g 153, :b 234} {:value 20, :x 541.5, :y 176.1433883666992, :r 101, :g 153, :b 234}]} {:name \"links\", :values [{:path \"M 28.500000424683094 176.1433883666992 L 541.4999932050705 176.1433883666992\", :r 101, :g 153, :b 234}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 176.1433883666992} {:value 20, :x 541.5, :y 176.1433883666992}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 176.1433883666992}]}]}}"}
;; <=

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 30] [20]))
(swap! test-repo #(assoc-in % [:commits 30] "A"))
(swap! test-repo #(assoc-in % [:branches "A"] #{30}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":176.1433883666992,"r":138,"g":154,"b":62},{"value":20,"x":284.99999999999994,"y":176.1433883666992,"r":138,"g":154,"b":62},{"value":30,"x":541.5,"y":176.1433883666992,"r":138,"g":154,"b":62}]},{"name":"links","values":[{"path":"M 28.500000424683094 176.1433883666992 L 285.0 176.1433883666992","r":138,"g":154,"b":62},{"path":"M 285.0 176.1433883666992 L 541.4999932050705 176.1433883666992","r":138,"g":154,"b":62}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":176.1433883666992},{"value":20,"x":284.99999999999994,"y":176.1433883666992},{"value":30,"x":541.5,"y":176.1433883666992}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":176.1433883666992}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 176.1433883666992, :r 138, :g 154, :b 62} {:value 20, :x 284.99999999999994, :y 176.1433883666992, :r 138, :g 154, :b 62} {:value 30, :x 541.5, :y 176.1433883666992, :r 138, :g 154, :b 62}]} {:name \"links\", :values [{:path \"M 28.500000424683094 176.1433883666992 L 285.0 176.1433883666992\", :r 138, :g 154, :b 62} {:path \"M 285.0 176.1433883666992 L 541.4999932050705 176.1433883666992\", :r 138, :g 154, :b 62}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 176.1433883666992} {:value 20, :x 284.99999999999994, :y 176.1433883666992} {:value 30, :x 541.5, :y 176.1433883666992}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 176.1433883666992}]}]}}"}
;; <=

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 40] [30]))
(swap! test-repo #(assoc-in % [:commits 40] "A"))
(swap! test-repo #(assoc-in % [:branches "A"] #{40}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":176.1433883666992,"r":174,"g":118,"b":26},{"value":20,"x":199.4999999999998,"y":176.1433883666992,"r":174,"g":118,"b":26},{"value":30,"x":370.4999999999998,"y":176.1433883666992,"r":174,"g":118,"b":26},{"value":40,"x":541.5,"y":176.1433883666992,"r":174,"g":118,"b":26}]},{"name":"links","values":[{"path":"M 28.500000424683094 176.1433883666992 L 199.49999660253525 176.1433883666992","r":174,"g":118,"b":26},{"path":"M 199.49999660253525 176.1433883666992 L 370.499986410141 176.1433883666992","r":174,"g":118,"b":26},{"path":"M 370.499986410141 176.1433883666992 L 541.4999932050705 176.1433883666992","r":174,"g":118,"b":26}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":176.1433883666992},{"value":20,"x":199.4999999999998,"y":176.1433883666992},{"value":30,"x":370.4999999999998,"y":176.1433883666992},{"value":40,"x":541.5,"y":176.1433883666992}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":176.1433883666992}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 176.1433883666992, :r 174, :g 118, :b 26} {:value 20, :x 199.4999999999998, :y 176.1433883666992, :r 174, :g 118, :b 26} {:value 30, :x 370.4999999999998, :y 176.1433883666992, :r 174, :g 118, :b 26} {:value 40, :x 541.5, :y 176.1433883666992, :r 174, :g 118, :b 26}]} {:name \"links\", :values [{:path \"M 28.500000424683094 176.1433883666992 L 199.49999660253525 176.1433883666992\", :r 174, :g 118, :b 26} {:path \"M 199.49999660253525 176.1433883666992 L 370.499986410141 176.1433883666992\", :r 174, :g 118, :b 26} {:path \"M 370.499986410141 176.1433883666992 L 541.4999932050705 176.1433883666992\", :r 174, :g 118, :b 26}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 176.1433883666992} {:value 20, :x 199.4999999999998, :y 176.1433883666992} {:value 30, :x 370.4999999999998, :y 176.1433883666992} {:value 40, :x 541.5, :y 176.1433883666992}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 176.1433883666992}]}]}}"}
;; <=

;; **
;;; Create a new branch and commit to it:
;; **

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 50] [40]))
(swap! test-repo #(assoc-in % [:commits 50] "B"))
(swap! test-repo #(assoc-in % [:branches "B"] #{50}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":117.42892557779948,"r":145,"g":34,"b":87},{"value":20,"x":156.74999999999972,"y":117.42892557779948,"r":145,"g":34,"b":87},{"value":30,"x":284.9999999999996,"y":117.42892557779948,"r":145,"g":34,"b":87},{"value":40,"x":413.24999999999966,"y":117.42892557779948,"r":145,"g":34,"b":87},{"value":50,"x":541.5,"y":234.85785115559898,"r":120,"g":180,"b":245}]},{"name":"links","values":[{"path":"M 28.500000424683094 117.42892907745417 L 156.75000339746475 117.42892907745417","r":145,"g":34,"b":87},{"path":"M 156.75000339746475 117.42892907745417 L 285.0 117.42892907745417","r":145,"g":34,"b":87},{"path":"M 285.0 117.42892907745417 L 413.250013589859 117.42892907745417","r":145,"g":34,"b":87},{"path":"M 413.250013589859 117.42892907745417 L 541.4999932050705 234.85785815490834","r":120,"g":180,"b":245}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":117.42892557779948},{"value":20,"x":156.74999999999972,"y":117.42892557779948},{"value":30,"x":284.9999999999996,"y":117.42892557779948},{"value":40,"x":413.24999999999966,"y":117.42892557779948},{"value":50,"x":541.5,"y":234.85785115559898}]},{"name":"labels","values":[{"value":"A","x":413.24999999999966,"y":117.42892557779948},{"value":"B","x":541.5,"y":234.85785115559898}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 117.42892557779948, :r 145, :g 34, :b 87} {:value 20, :x 156.74999999999972, :y 117.42892557779948, :r 145, :g 34, :b 87} {:value 30, :x 284.9999999999996, :y 117.42892557779948, :r 145, :g 34, :b 87} {:value 40, :x 413.24999999999966, :y 117.42892557779948, :r 145, :g 34, :b 87} {:value 50, :x 541.5, :y 234.85785115559898, :r 120, :g 180, :b 245}]} {:name \"links\", :values [{:path \"M 28.500000424683094 117.42892907745417 L 156.75000339746475 117.42892907745417\", :r 145, :g 34, :b 87} {:path \"M 156.75000339746475 117.42892907745417 L 285.0 117.42892907745417\", :r 145, :g 34, :b 87} {:path \"M 285.0 117.42892907745417 L 413.250013589859 117.42892907745417\", :r 145, :g 34, :b 87} {:path \"M 413.250013589859 117.42892907745417 L 541.4999932050705 234.85785815490834\", :r 120, :g 180, :b 245}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 117.42892557779948} {:value 20, :x 156.74999999999972, :y 117.42892557779948} {:value 30, :x 284.9999999999996, :y 117.42892557779948} {:value 40, :x 413.24999999999966, :y 117.42892557779948} {:value 50, :x 541.5, :y 234.85785115559898}]} {:name \"labels\", :values [{:value \"A\", :x 413.24999999999966, :y 117.42892557779948} {:value \"B\", :x 541.5, :y 234.85785115559898}]}]}}"}
;; <=

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 60] [50]))
(swap! test-repo #(assoc-in % [:commits 60] "B"))
(swap! test-repo #(assoc-in % [:branches "B"] #{60}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":117.42892557779948,"r":95,"g":74,"b":71},{"value":20,"x":131.09999999999965,"y":117.42892557779948,"r":95,"g":74,"b":71},{"value":30,"x":233.69999999999936,"y":117.42892557779948,"r":95,"g":74,"b":71},{"value":40,"x":336.2999999999992,"y":117.42892557779948,"r":95,"g":74,"b":71},{"value":50,"x":438.89999999999947,"y":234.85785115559898,"r":208,"g":43,"b":78},{"value":60,"x":541.5,"y":234.85785115559898,"r":208,"g":43,"b":78}]},{"name":"links","values":[{"path":"M 28.500000424683094 117.42892907745417 L 131.10000237822533 117.42892907745417","r":95,"g":74,"b":71},{"path":"M 131.10000237822533 117.42892907745417 L 233.69999796152115 117.42892907745417","r":95,"g":74,"b":71},{"path":"M 233.69999796152115 117.42892907745417 L 336.2999850511551 117.42892907745417","r":95,"g":74,"b":71},{"path":"M 438.8999891281128 234.85785815490834 L 541.4999932050705 234.85785815490834","r":208,"g":43,"b":78},{"path":"M 336.2999850511551 117.42892907745417 L 438.8999891281128 234.85785815490834","r":208,"g":43,"b":78}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":117.42892557779948},{"value":20,"x":131.09999999999965,"y":117.42892557779948},{"value":30,"x":233.69999999999936,"y":117.42892557779948},{"value":40,"x":336.2999999999992,"y":117.42892557779948},{"value":50,"x":438.89999999999947,"y":234.85785115559898},{"value":60,"x":541.5,"y":234.85785115559898}]},{"name":"labels","values":[{"value":"A","x":336.2999999999992,"y":117.42892557779948},{"value":"B","x":541.5,"y":234.85785115559898}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 117.42892557779948, :r 95, :g 74, :b 71} {:value 20, :x 131.09999999999965, :y 117.42892557779948, :r 95, :g 74, :b 71} {:value 30, :x 233.69999999999936, :y 117.42892557779948, :r 95, :g 74, :b 71} {:value 40, :x 336.2999999999992, :y 117.42892557779948, :r 95, :g 74, :b 71} {:value 50, :x 438.89999999999947, :y 234.85785115559898, :r 208, :g 43, :b 78} {:value 60, :x 541.5, :y 234.85785115559898, :r 208, :g 43, :b 78}]} {:name \"links\", :values [{:path \"M 28.500000424683094 117.42892907745417 L 131.10000237822533 117.42892907745417\", :r 95, :g 74, :b 71} {:path \"M 131.10000237822533 117.42892907745417 L 233.69999796152115 117.42892907745417\", :r 95, :g 74, :b 71} {:path \"M 233.69999796152115 117.42892907745417 L 336.2999850511551 117.42892907745417\", :r 95, :g 74, :b 71} {:path \"M 438.8999891281128 234.85785815490834 L 541.4999932050705 234.85785815490834\", :r 208, :g 43, :b 78} {:path \"M 336.2999850511551 117.42892907745417 L 438.8999891281128 234.85785815490834\", :r 208, :g 43, :b 78}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 117.42892557779948} {:value 20, :x 131.09999999999965, :y 117.42892557779948} {:value 30, :x 233.69999999999936, :y 117.42892557779948} {:value 40, :x 336.2999999999992, :y 117.42892557779948} {:value 50, :x 438.89999999999947, :y 234.85785115559898} {:value 60, :x 541.5, :y 234.85785115559898}]} {:name \"labels\", :values [{:value \"A\", :x 336.2999999999992, :y 117.42892557779948} {:value \"B\", :x 541.5, :y 234.85785115559898}]}]}}"}
;; <=

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 70] [60]))
(swap! test-repo #(assoc-in % [:commits 70] "B"))
(swap! test-repo #(assoc-in % [:branches "B"] #{70}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":117.42892557779948,"r":24,"g":231,"b":38},{"value":20,"x":113.99999999981578,"y":117.42892557779948,"r":24,"g":231,"b":38},{"value":30,"x":199.49999999968512,"y":117.42892557779948,"r":24,"g":231,"b":38},{"value":40,"x":284.9999999996412,"y":117.42892557779948,"r":24,"g":231,"b":38},{"value":50,"x":370.4999999996934,"y":234.85785115559898,"r":169,"g":227,"b":42},{"value":60,"x":455.99999999982526,"y":234.85785115559898,"r":169,"g":227,"b":42},{"value":70,"x":541.5,"y":234.85785115559898,"r":169,"g":227,"b":42}]},{"name":"links","values":[{"path":"M 28.500000424683094 117.42892907745417 L 114.00000169873238 117.42892907745417","r":24,"g":231,"b":38},{"path":"M 114.00000169873238 117.42892907745417 L 199.49999660253525 117.42892907745417","r":24,"g":231,"b":38},{"path":"M 199.49999660253525 117.42892907745417 L 285.0 117.42892907745417","r":24,"g":231,"b":38},{"path":"M 370.499986410141 234.85785815490834 L 456.0000067949295 234.85785815490834","r":169,"g":227,"b":42},{"path":"M 456.0000067949295 234.85785815490834 L 541.4999932050705 234.85785815490834","r":169,"g":227,"b":42},{"path":"M 285.0 117.42892907745417 L 370.499986410141 234.85785815490834","r":169,"g":227,"b":42}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":117.42892557779948},{"value":20,"x":113.99999999981578,"y":117.42892557779948},{"value":30,"x":199.49999999968512,"y":117.42892557779948},{"value":40,"x":284.9999999996412,"y":117.42892557779948},{"value":50,"x":370.4999999996934,"y":234.85785115559898},{"value":60,"x":455.99999999982526,"y":234.85785115559898},{"value":70,"x":541.5,"y":234.85785115559898}]},{"name":"labels","values":[{"value":"A","x":284.9999999996412,"y":117.42892557779948},{"value":"B","x":541.5,"y":234.85785115559898}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 117.42892557779948, :r 24, :g 231, :b 38} {:value 20, :x 113.99999999981578, :y 117.42892557779948, :r 24, :g 231, :b 38} {:value 30, :x 199.49999999968512, :y 117.42892557779948, :r 24, :g 231, :b 38} {:value 40, :x 284.9999999996412, :y 117.42892557779948, :r 24, :g 231, :b 38} {:value 50, :x 370.4999999996934, :y 234.85785115559898, :r 169, :g 227, :b 42} {:value 60, :x 455.99999999982526, :y 234.85785115559898, :r 169, :g 227, :b 42} {:value 70, :x 541.5, :y 234.85785115559898, :r 169, :g 227, :b 42}]} {:name \"links\", :values [{:path \"M 28.500000424683094 117.42892907745417 L 114.00000169873238 117.42892907745417\", :r 24, :g 231, :b 38} {:path \"M 114.00000169873238 117.42892907745417 L 199.49999660253525 117.42892907745417\", :r 24, :g 231, :b 38} {:path \"M 199.49999660253525 117.42892907745417 L 285.0 117.42892907745417\", :r 24, :g 231, :b 38} {:path \"M 370.499986410141 234.85785815490834 L 456.0000067949295 234.85785815490834\", :r 169, :g 227, :b 42} {:path \"M 456.0000067949295 234.85785815490834 L 541.4999932050705 234.85785815490834\", :r 169, :g 227, :b 42} {:path \"M 285.0 117.42892907745417 L 370.499986410141 234.85785815490834\", :r 169, :g 227, :b 42}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 117.42892557779948} {:value 20, :x 113.99999999981578, :y 117.42892557779948} {:value 30, :x 199.49999999968512, :y 117.42892557779948} {:value 40, :x 284.9999999996412, :y 117.42892557779948} {:value 50, :x 370.4999999996934, :y 234.85785115559898} {:value 60, :x 455.99999999982526, :y 234.85785115559898} {:value 70, :x 541.5, :y 234.85785115559898}]} {:name \"labels\", :values [{:value \"A\", :x 284.9999999996412, :y 117.42892557779948} {:value \"B\", :x 541.5, :y 234.85785115559898}]}]}}"}
;; <=

;; **
;;; Merge "master" and "dev" branch-heads:
;; **

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 80] [70 40]))
(swap! test-repo #(assoc-in % [:commits 80] "A"))
(swap! test-repo #(assoc-in % [:branches "A"] #{80}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":117.42892557779948,"r":101,"g":70,"b":93},{"value":20,"x":163.49999999999955,"y":117.42892557779948,"r":101,"g":70,"b":93},{"value":30,"x":298.49999999999926,"y":117.42892557779948,"r":101,"g":70,"b":93},{"value":40,"x":433.4999999999993,"y":117.42892557779948,"r":101,"g":70,"b":93},{"value":80,"x":541.5,"y":117.42892557779948,"r":101,"g":70,"b":93},{"value":50,"x":460.49999999999903,"y":234.85785115559898,"r":164,"g":43,"b":250},{"value":60,"x":487.49999999999903,"y":234.85785115559898,"r":164,"g":43,"b":250},{"value":70,"x":514.4999999999994,"y":234.85785115559898,"r":164,"g":43,"b":250}]},{"name":"links","values":[{"path":"M 28.500000424683094 117.42892907745417 L 163.50000143051147 117.42892907745417","r":101,"g":70,"b":93},{"path":"M 163.50000143051147 117.42892907745417 L 298.49999606609344 117.42892907745417","r":101,"g":70,"b":93},{"path":"M 298.49999606609344 117.42892907745417 L 433.4999907016754 117.42892907745417","r":101,"g":70,"b":93},{"path":"M 433.4999907016754 117.42892907745417 L 541.4999932050705 117.42892907745417","r":101,"g":70,"b":93},{"path":"M 460.5000168085098 234.85785815490834 L 487.5000089406967 234.85785815490834","r":164,"g":43,"b":250},{"path":"M 487.5000089406967 234.85785815490834 L 514.5000010728836 234.85785815490834","r":164,"g":43,"b":250},{"path":"M 433.4999907016754 117.42892907745417 L 460.5000168085098 234.85785815490834","r":164,"g":43,"b":250},{"path":"M 541.4999932050705 117.42892907745417 L 514.5000010728836 234.85785815490834","r":164,"g":43,"b":250}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":117.42892557779948},{"value":20,"x":163.49999999999955,"y":117.42892557779948},{"value":30,"x":298.49999999999926,"y":117.42892557779948},{"value":40,"x":433.4999999999993,"y":117.42892557779948},{"value":80,"x":541.5,"y":117.42892557779948},{"value":50,"x":460.49999999999903,"y":234.85785115559898},{"value":60,"x":487.49999999999903,"y":234.85785115559898},{"value":70,"x":514.4999999999994,"y":234.85785115559898}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":117.42892557779948},{"value":"B","x":514.4999999999994,"y":234.85785115559898}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 117.42892557779948, :r 101, :g 70, :b 93} {:value 20, :x 163.49999999999955, :y 117.42892557779948, :r 101, :g 70, :b 93} {:value 30, :x 298.49999999999926, :y 117.42892557779948, :r 101, :g 70, :b 93} {:value 40, :x 433.4999999999993, :y 117.42892557779948, :r 101, :g 70, :b 93} {:value 80, :x 541.5, :y 117.42892557779948, :r 101, :g 70, :b 93} {:value 50, :x 460.49999999999903, :y 234.85785115559898, :r 164, :g 43, :b 250} {:value 60, :x 487.49999999999903, :y 234.85785115559898, :r 164, :g 43, :b 250} {:value 70, :x 514.4999999999994, :y 234.85785115559898, :r 164, :g 43, :b 250}]} {:name \"links\", :values [{:path \"M 28.500000424683094 117.42892907745417 L 163.50000143051147 117.42892907745417\", :r 101, :g 70, :b 93} {:path \"M 163.50000143051147 117.42892907745417 L 298.49999606609344 117.42892907745417\", :r 101, :g 70, :b 93} {:path \"M 298.49999606609344 117.42892907745417 L 433.4999907016754 117.42892907745417\", :r 101, :g 70, :b 93} {:path \"M 433.4999907016754 117.42892907745417 L 541.4999932050705 117.42892907745417\", :r 101, :g 70, :b 93} {:path \"M 460.5000168085098 234.85785815490834 L 487.5000089406967 234.85785815490834\", :r 164, :g 43, :b 250} {:path \"M 487.5000089406967 234.85785815490834 L 514.5000010728836 234.85785815490834\", :r 164, :g 43, :b 250} {:path \"M 433.4999907016754 117.42892907745417 L 460.5000168085098 234.85785815490834\", :r 164, :g 43, :b 250} {:path \"M 541.4999932050705 117.42892907745417 L 514.5000010728836 234.85785815490834\", :r 164, :g 43, :b 250}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 117.42892557779948} {:value 20, :x 163.49999999999955, :y 117.42892557779948} {:value 30, :x 298.49999999999926, :y 117.42892557779948} {:value 40, :x 433.4999999999993, :y 117.42892557779948} {:value 80, :x 541.5, :y 117.42892557779948} {:value 50, :x 460.49999999999903, :y 234.85785115559898} {:value 60, :x 487.49999999999903, :y 234.85785115559898} {:value 70, :x 514.4999999999994, :y 234.85785115559898}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 117.42892557779948} {:value \"B\", :x 514.4999999999994, :y 234.85785115559898}]}]}}"}
;; <=

;; **
;;; Commit to "dev" branch:
;; **

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 90] [70]))
(swap! test-repo #(assoc-in % [:commits 90] "B"))
(swap! test-repo #(assoc-in % [:branches "B"] #{90}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":117.42892557779948,"r":64,"g":227,"b":158},{"value":20,"x":164.29411764705839,"y":117.42892557779948,"r":64,"g":227,"b":158},{"value":30,"x":300.08823529411694,"y":117.42892557779948,"r":64,"g":227,"b":158},{"value":40,"x":435.8823529411759,"y":117.42892557779948,"r":64,"g":227,"b":158},{"value":80,"x":541.5,"y":117.42892557779948,"r":64,"g":227,"b":158},{"value":50,"x":466.0588235294109,"y":234.85785115559898,"r":221,"g":108,"b":224},{"value":60,"x":496.23529411764633,"y":234.85785115559898,"r":221,"g":108,"b":224},{"value":70,"x":526.411764705882,"y":234.85785115559898,"r":221,"g":108,"b":224},{"value":90,"x":541.5,"y":234.85785115559898,"r":221,"g":108,"b":224}]},{"name":"links","values":[{"path":"M 28.500000424683094 117.42892907745417 L 164.29412484169006 117.42892907745417","r":64,"g":227,"b":158},{"path":"M 164.29412484169006 117.42892907745417 L 300.0882428884506 117.42892907745417","r":64,"g":227,"b":158},{"path":"M 300.0882428884506 117.42892907745417 L 435.8823609352112 117.42892907745417","r":64,"g":227,"b":158},{"path":"M 435.8823609352112 117.42892907745417 L 541.4999932050705 117.42892907745417","r":64,"g":227,"b":158},{"path":"M 466.0588127374649 234.85785815490834 L 496.23529851436615 234.85785815490834","r":221,"g":108,"b":224},{"path":"M 496.23529851436615 234.85785815490834 L 526.4117503166199 234.85785815490834","r":221,"g":108,"b":224},{"path":"M 526.4117503166199 234.85785815490834 L 541.4999932050705 234.85785815490834","r":221,"g":108,"b":224},{"path":"M 435.8823609352112 117.42892907745417 L 466.0588127374649 234.85785815490834","r":221,"g":108,"b":224},{"path":"M 541.4999932050705 117.42892907745417 L 526.4117503166199 234.85785815490834","r":221,"g":108,"b":224}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":117.42892557779948},{"value":20,"x":164.29411764705839,"y":117.42892557779948},{"value":30,"x":300.08823529411694,"y":117.42892557779948},{"value":40,"x":435.8823529411759,"y":117.42892557779948},{"value":80,"x":541.5,"y":117.42892557779948},{"value":50,"x":466.0588235294109,"y":234.85785115559898},{"value":60,"x":496.23529411764633,"y":234.85785115559898},{"value":70,"x":526.411764705882,"y":234.85785115559898},{"value":90,"x":541.5,"y":234.85785115559898}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":117.42892557779948},{"value":"B","x":541.5,"y":234.85785115559898}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 117.42892557779948, :r 64, :g 227, :b 158} {:value 20, :x 164.29411764705839, :y 117.42892557779948, :r 64, :g 227, :b 158} {:value 30, :x 300.08823529411694, :y 117.42892557779948, :r 64, :g 227, :b 158} {:value 40, :x 435.8823529411759, :y 117.42892557779948, :r 64, :g 227, :b 158} {:value 80, :x 541.5, :y 117.42892557779948, :r 64, :g 227, :b 158} {:value 50, :x 466.0588235294109, :y 234.85785115559898, :r 221, :g 108, :b 224} {:value 60, :x 496.23529411764633, :y 234.85785115559898, :r 221, :g 108, :b 224} {:value 70, :x 526.411764705882, :y 234.85785115559898, :r 221, :g 108, :b 224} {:value 90, :x 541.5, :y 234.85785115559898, :r 221, :g 108, :b 224}]} {:name \"links\", :values [{:path \"M 28.500000424683094 117.42892907745417 L 164.29412484169006 117.42892907745417\", :r 64, :g 227, :b 158} {:path \"M 164.29412484169006 117.42892907745417 L 300.0882428884506 117.42892907745417\", :r 64, :g 227, :b 158} {:path \"M 300.0882428884506 117.42892907745417 L 435.8823609352112 117.42892907745417\", :r 64, :g 227, :b 158} {:path \"M 435.8823609352112 117.42892907745417 L 541.4999932050705 117.42892907745417\", :r 64, :g 227, :b 158} {:path \"M 466.0588127374649 234.85785815490834 L 496.23529851436615 234.85785815490834\", :r 221, :g 108, :b 224} {:path \"M 496.23529851436615 234.85785815490834 L 526.4117503166199 234.85785815490834\", :r 221, :g 108, :b 224} {:path \"M 526.4117503166199 234.85785815490834 L 541.4999932050705 234.85785815490834\", :r 221, :g 108, :b 224} {:path \"M 435.8823609352112 117.42892907745417 L 466.0588127374649 234.85785815490834\", :r 221, :g 108, :b 224} {:path \"M 541.4999932050705 117.42892907745417 L 526.4117503166199 234.85785815490834\", :r 221, :g 108, :b 224}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 117.42892557779948} {:value 20, :x 164.29411764705839, :y 117.42892557779948} {:value 30, :x 300.08823529411694, :y 117.42892557779948} {:value 40, :x 435.8823529411759, :y 117.42892557779948} {:value 80, :x 541.5, :y 117.42892557779948} {:value 50, :x 466.0588235294109, :y 234.85785115559898} {:value 60, :x 496.23529411764633, :y 234.85785115559898} {:value 70, :x 526.411764705882, :y 234.85785115559898} {:value 90, :x 541.5, :y 234.85785115559898}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 117.42892557779948} {:value \"B\", :x 541.5, :y 234.85785115559898}]}]}}"}
;; <=

;; **
;;; Commit to "master" branch:
;; **

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 100] [80]))
(swap! test-repo #(assoc-in % [:commits 100] "A"))
(swap! test-repo #(assoc-in % [:branches "A"] #{100}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":117.42892557779948,"r":83,"g":236,"b":131},{"value":20,"x":148.19999999999172,"y":117.42892557779948,"r":83,"g":236,"b":131},{"value":30,"x":267.8999999999861,"y":117.42892557779948,"r":83,"g":236,"b":131},{"value":40,"x":387.59999999998473,"y":117.42892557779948,"r":83,"g":236,"b":131},{"value":80,"x":473.09999999999104,"y":117.42892557779948,"r":83,"g":236,"b":131},{"value":100,"x":541.5,"y":117.42892557779948,"r":83,"g":236,"b":131},{"value":50,"x":421.7999999999816,"y":234.85785115559898,"r":164,"g":58,"b":10},{"value":60,"x":455.99999999998397,"y":234.85785115559898,"r":164,"g":58,"b":10},{"value":70,"x":490.1999999999909,"y":234.85785115559898,"r":164,"g":58,"b":10},{"value":90,"x":541.5,"y":234.85785115559898,"r":164,"g":58,"b":10}]},{"name":"links","values":[{"path":"M 28.500000424683094 117.42892907745417 L 148.1999945640564 117.42892907745417","r":83,"g":236,"b":131},{"path":"M 148.1999945640564 117.42892907745417 L 267.89999932050705 117.42892907745417","r":83,"g":236,"b":131},{"path":"M 267.89999932050705 117.42892907745417 L 387.6000040769577 117.42892907745417","r":83,"g":236,"b":131},{"path":"M 387.6000040769577 117.42892907745417 L 473.0999904870987 117.42892907745417","r":83,"g":236,"b":131},{"path":"M 473.0999904870987 117.42892907745417 L 541.4999932050705 117.42892907745417","r":83,"g":236,"b":131},{"path":"M 421.8000054359436 234.85785815490834 L 456.0000067949295 234.85785815490834","r":164,"g":58,"b":10},{"path":"M 456.0000067949295 234.85785815490834 L 490.2000081539154 234.85785815490834","r":164,"g":58,"b":10},{"path":"M 490.2000081539154 234.85785815490834 L 541.4999932050705 234.85785815490834","r":164,"g":58,"b":10},{"path":"M 387.6000040769577 117.42892907745417 L 421.8000054359436 234.85785815490834","r":164,"g":58,"b":10},{"path":"M 473.0999904870987 117.42892907745417 L 490.2000081539154 234.85785815490834","r":164,"g":58,"b":10}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":117.42892557779948},{"value":20,"x":148.19999999999172,"y":117.42892557779948},{"value":30,"x":267.8999999999861,"y":117.42892557779948},{"value":40,"x":387.59999999998473,"y":117.42892557779948},{"value":80,"x":473.09999999999104,"y":117.42892557779948},{"value":100,"x":541.5,"y":117.42892557779948},{"value":50,"x":421.7999999999816,"y":234.85785115559898},{"value":60,"x":455.99999999998397,"y":234.85785115559898},{"value":70,"x":490.1999999999909,"y":234.85785115559898},{"value":90,"x":541.5,"y":234.85785115559898}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":117.42892557779948},{"value":"B","x":541.5,"y":234.85785115559898}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 117.42892557779948, :r 83, :g 236, :b 131} {:value 20, :x 148.19999999999172, :y 117.42892557779948, :r 83, :g 236, :b 131} {:value 30, :x 267.8999999999861, :y 117.42892557779948, :r 83, :g 236, :b 131} {:value 40, :x 387.59999999998473, :y 117.42892557779948, :r 83, :g 236, :b 131} {:value 80, :x 473.09999999999104, :y 117.42892557779948, :r 83, :g 236, :b 131} {:value 100, :x 541.5, :y 117.42892557779948, :r 83, :g 236, :b 131} {:value 50, :x 421.7999999999816, :y 234.85785115559898, :r 164, :g 58, :b 10} {:value 60, :x 455.99999999998397, :y 234.85785115559898, :r 164, :g 58, :b 10} {:value 70, :x 490.1999999999909, :y 234.85785115559898, :r 164, :g 58, :b 10} {:value 90, :x 541.5, :y 234.85785115559898, :r 164, :g 58, :b 10}]} {:name \"links\", :values [{:path \"M 28.500000424683094 117.42892907745417 L 148.1999945640564 117.42892907745417\", :r 83, :g 236, :b 131} {:path \"M 148.1999945640564 117.42892907745417 L 267.89999932050705 117.42892907745417\", :r 83, :g 236, :b 131} {:path \"M 267.89999932050705 117.42892907745417 L 387.6000040769577 117.42892907745417\", :r 83, :g 236, :b 131} {:path \"M 387.6000040769577 117.42892907745417 L 473.0999904870987 117.42892907745417\", :r 83, :g 236, :b 131} {:path \"M 473.0999904870987 117.42892907745417 L 541.4999932050705 117.42892907745417\", :r 83, :g 236, :b 131} {:path \"M 421.8000054359436 234.85785815490834 L 456.0000067949295 234.85785815490834\", :r 164, :g 58, :b 10} {:path \"M 456.0000067949295 234.85785815490834 L 490.2000081539154 234.85785815490834\", :r 164, :g 58, :b 10} {:path \"M 490.2000081539154 234.85785815490834 L 541.4999932050705 234.85785815490834\", :r 164, :g 58, :b 10} {:path \"M 387.6000040769577 117.42892907745417 L 421.8000054359436 234.85785815490834\", :r 164, :g 58, :b 10} {:path \"M 473.0999904870987 117.42892907745417 L 490.2000081539154 234.85785815490834\", :r 164, :g 58, :b 10}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 117.42892557779948} {:value 20, :x 148.19999999999172, :y 117.42892557779948} {:value 30, :x 267.8999999999861, :y 117.42892557779948} {:value 40, :x 387.59999999998473, :y 117.42892557779948} {:value 80, :x 473.09999999999104, :y 117.42892557779948} {:value 100, :x 541.5, :y 117.42892557779948} {:value 50, :x 421.7999999999816, :y 234.85785115559898} {:value 60, :x 455.99999999998397, :y 234.85785115559898} {:value 70, :x 490.1999999999909, :y 234.85785115559898} {:value 90, :x 541.5, :y 234.85785115559898}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 117.42892557779948} {:value \"B\", :x 541.5, :y 234.85785115559898}]}]}}"}
;; <=

;; **
;;; Branch from earlier commits in "master"
;; **

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 110] [20]))
(swap! test-repo #(assoc-in % [:commits 110] "C"))
(swap! test-repo #(assoc-in % [:branches "C"] #{110}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":176.1433883666992,"r":96,"g":43,"b":196},{"value":20,"x":318.87735849056565,"y":176.1433883666992,"r":96,"g":43,"b":196},{"value":30,"x":386.63207547169725,"y":176.1433883666992,"r":96,"g":43,"b":196},{"value":40,"x":454.3867924528292,"y":176.1433883666992,"r":96,"g":43,"b":196},{"value":80,"x":502.7830188679239,"y":176.1433883666992,"r":96,"g":43,"b":196},{"value":100,"x":541.5,"y":176.1433883666992,"r":96,"g":43,"b":196},{"value":50,"x":473.7452830188667,"y":88.0716941833496,"r":159,"g":7,"b":206},{"value":60,"x":493.10377358490456,"y":88.0716941833496,"r":159,"g":7,"b":206},{"value":70,"x":512.4622641509427,"y":88.0716941833496,"r":159,"g":7,"b":206},{"value":90,"x":541.5,"y":88.0716941833496,"r":159,"g":7,"b":206},{"value":110,"x":541.5,"y":264.2150825500488,"r":75,"g":127,"b":248}]},{"name":"links","values":[{"path":"M 28.500000424683094 176.1433883666992 L 318.8773441314697 176.1433883666992","r":96,"g":43,"b":196},{"path":"M 318.8773441314697 176.1433883666992 L 386.6320663690567 176.1433883666992","r":96,"g":43,"b":196},{"path":"M 386.6320663690567 176.1433883666992 L 454.3867886066437 176.1433883666992","r":96,"g":43,"b":196},{"path":"M 454.3867886066437 176.1433883666992 L 502.7830284833908 176.1433883666992","r":96,"g":43,"b":196},{"path":"M 502.7830284833908 176.1433883666992 L 541.4999932050705 176.1433883666992","r":96,"g":43,"b":196},{"path":"M 473.7452709674835 88.0716941833496 L 493.1037873029709 88.0716941833496","r":159,"g":7,"b":206},{"path":"M 493.1037873029709 88.0716941833496 L 512.4622696638107 88.0716941833496","r":159,"g":7,"b":206},{"path":"M 512.4622696638107 88.0716941833496 L 541.4999932050705 88.0716941833496","r":159,"g":7,"b":206},{"path":"M 454.3867886066437 176.1433883666992 L 473.7452709674835 88.0716941833496","r":159,"g":7,"b":206},{"path":"M 318.8773441314697 176.1433883666992 L 541.4999932050705 264.2150825500488","r":75,"g":127,"b":248},{"path":"M 502.7830284833908 176.1433883666992 L 512.4622696638107 88.0716941833496","r":159,"g":7,"b":206}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":176.1433883666992},{"value":20,"x":318.87735849056565,"y":176.1433883666992},{"value":30,"x":386.63207547169725,"y":176.1433883666992},{"value":40,"x":454.3867924528292,"y":176.1433883666992},{"value":80,"x":502.7830188679239,"y":176.1433883666992},{"value":100,"x":541.5,"y":176.1433883666992},{"value":50,"x":473.7452830188667,"y":88.0716941833496},{"value":60,"x":493.10377358490456,"y":88.0716941833496},{"value":70,"x":512.4622641509427,"y":88.0716941833496},{"value":90,"x":541.5,"y":88.0716941833496},{"value":110,"x":541.5,"y":264.2150825500488}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":176.1433883666992},{"value":"B","x":541.5,"y":88.0716941833496},{"value":"C","x":541.5,"y":264.2150825500488}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 176.1433883666992, :r 96, :g 43, :b 196} {:value 20, :x 318.87735849056565, :y 176.1433883666992, :r 96, :g 43, :b 196} {:value 30, :x 386.63207547169725, :y 176.1433883666992, :r 96, :g 43, :b 196} {:value 40, :x 454.3867924528292, :y 176.1433883666992, :r 96, :g 43, :b 196} {:value 80, :x 502.7830188679239, :y 176.1433883666992, :r 96, :g 43, :b 196} {:value 100, :x 541.5, :y 176.1433883666992, :r 96, :g 43, :b 196} {:value 50, :x 473.7452830188667, :y 88.0716941833496, :r 159, :g 7, :b 206} {:value 60, :x 493.10377358490456, :y 88.0716941833496, :r 159, :g 7, :b 206} {:value 70, :x 512.4622641509427, :y 88.0716941833496, :r 159, :g 7, :b 206} {:value 90, :x 541.5, :y 88.0716941833496, :r 159, :g 7, :b 206} {:value 110, :x 541.5, :y 264.2150825500488, :r 75, :g 127, :b 248}]} {:name \"links\", :values [{:path \"M 28.500000424683094 176.1433883666992 L 318.8773441314697 176.1433883666992\", :r 96, :g 43, :b 196} {:path \"M 318.8773441314697 176.1433883666992 L 386.6320663690567 176.1433883666992\", :r 96, :g 43, :b 196} {:path \"M 386.6320663690567 176.1433883666992 L 454.3867886066437 176.1433883666992\", :r 96, :g 43, :b 196} {:path \"M 454.3867886066437 176.1433883666992 L 502.7830284833908 176.1433883666992\", :r 96, :g 43, :b 196} {:path \"M 502.7830284833908 176.1433883666992 L 541.4999932050705 176.1433883666992\", :r 96, :g 43, :b 196} {:path \"M 473.7452709674835 88.0716941833496 L 493.1037873029709 88.0716941833496\", :r 159, :g 7, :b 206} {:path \"M 493.1037873029709 88.0716941833496 L 512.4622696638107 88.0716941833496\", :r 159, :g 7, :b 206} {:path \"M 512.4622696638107 88.0716941833496 L 541.4999932050705 88.0716941833496\", :r 159, :g 7, :b 206} {:path \"M 454.3867886066437 176.1433883666992 L 473.7452709674835 88.0716941833496\", :r 159, :g 7, :b 206} {:path \"M 318.8773441314697 176.1433883666992 L 541.4999932050705 264.2150825500488\", :r 75, :g 127, :b 248} {:path \"M 502.7830284833908 176.1433883666992 L 512.4622696638107 88.0716941833496\", :r 159, :g 7, :b 206}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 176.1433883666992} {:value 20, :x 318.87735849056565, :y 176.1433883666992} {:value 30, :x 386.63207547169725, :y 176.1433883666992} {:value 40, :x 454.3867924528292, :y 176.1433883666992} {:value 80, :x 502.7830188679239, :y 176.1433883666992} {:value 100, :x 541.5, :y 176.1433883666992} {:value 50, :x 473.7452830188667, :y 88.0716941833496} {:value 60, :x 493.10377358490456, :y 88.0716941833496} {:value 70, :x 512.4622641509427, :y 88.0716941833496} {:value 90, :x 541.5, :y 88.0716941833496} {:value 110, :x 541.5, :y 264.2150825500488}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 176.1433883666992} {:value \"B\", :x 541.5, :y 88.0716941833496} {:value \"C\", :x 541.5, :y 264.2150825500488}]}]}}"}
;; <=

;; @@
(swap! test-repo #(assoc-in % [:commit-graph 120] [110]))
(swap! test-repo #(assoc-in % [:commits 120] "C"))
(swap! test-repo #(assoc-in % [:branches "C"] #{120}))
(plot-graph @test-repo)
;; @@
;; =>
;;; {"type":"vega","content":{"width":600,"height":370.82818603515625,"padding":{"top":10,"left":50,"bottom":20,"right":10},"marks":[{"type":"path","from":{"data":"links"},"properties":{"enter":{"path":{"field":"data.path"},"strokeWidth":{"value":2},"stroke":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}}}}},{"type":"symbol","from":{"data":"nodes"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"fill":{"r":{"field":"data.r"},"g":{"field":"data.g"},"b":{"field":"data.b"}},"fillOpacity":{"value":"1"}},"update":{"shape":"circle","size":{"value":110},"stroke":["value","transparent"]}}},{"type":"text","from":{"data":"node-labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"center"},"dy":{"value":-20},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}},{"type":"text","from":{"data":"labels"},"properties":{"enter":{"x":{"field":"data.x"},"y":{"field":"data.y"},"align":{"value":"left"},"dx":{"value":10},"fontSize":{"value":15},"fill":{"value":"black"}},"update":{"text":{"field":"data.value"}}}}],"data":[{"name":"nodes","values":[{"value":10,"x":28.5,"y":176.1433883666992,"r":195,"g":160,"b":193},{"value":20,"x":257.1867469879494,"y":176.1433883666992,"r":195,"g":160,"b":193},{"value":30,"x":343.7168674698745,"y":176.1433883666992,"r":195,"g":160,"b":193},{"value":40,"x":430.24698795180126,"y":176.1433883666992,"r":195,"g":160,"b":193},{"value":80,"x":492.0542168674663,"y":176.1433883666992,"r":195,"g":160,"b":193},{"value":100,"x":541.5,"y":176.1433883666992,"r":195,"g":160,"b":193},{"value":50,"x":454.9698795180649,"y":88.0716941833496,"r":248,"g":50,"b":149},{"value":60,"x":479.69277108433073,"y":88.0716941833496,"r":248,"g":50,"b":149},{"value":70,"x":504.4156626505986,"y":88.0716941833496,"r":248,"g":50,"b":149},{"value":90,"x":541.5,"y":88.0716941833496,"r":248,"g":50,"b":149},{"value":110,"x":399.3433734939745,"y":264.2150825500488,"r":96,"g":134,"b":215},{"value":120,"x":541.5,"y":264.2150825500488,"r":96,"g":134,"b":215}]},{"name":"links","values":[{"path":"M 28.500000424683094 176.1433883666992 L 257.1867397427559 176.1433883666992","r":195,"g":160,"b":193},{"path":"M 257.1867397427559 176.1433883666992 L 343.71685445308685 176.1433883666992","r":195,"g":160,"b":193},{"path":"M 343.71685445308685 176.1433883666992 L 430.2469861507416 176.1433883666992","r":195,"g":160,"b":193},{"path":"M 430.2469861507416 176.1433883666992 L 492.0542085170746 176.1433883666992","r":195,"g":160,"b":193},{"path":"M 492.0542085170746 176.1433883666992 L 541.4999932050705 176.1433883666992","r":195,"g":160,"b":193},{"path":"M 454.9698954820633 88.0716941833496 L 479.6927708387375 88.0716941833496","r":248,"g":50,"b":149},{"path":"M 479.6927708387375 88.0716941833496 L 504.4156461954117 88.0716941833496","r":248,"g":50,"b":149},{"path":"M 504.4156461954117 88.0716941833496 L 541.4999932050705 88.0716941833496","r":248,"g":50,"b":149},{"path":"M 399.3433749675751 264.2150825500488 L 541.4999932050705 264.2150825500488","r":96,"g":134,"b":215},{"path":"M 430.2469861507416 176.1433883666992 L 454.9698954820633 88.0716941833496","r":248,"g":50,"b":149},{"path":"M 257.1867397427559 176.1433883666992 L 399.3433749675751 264.2150825500488","r":96,"g":134,"b":215},{"path":"M 492.0542085170746 176.1433883666992 L 504.4156461954117 88.0716941833496","r":248,"g":50,"b":149}]},{"name":"node-labels","values":[{"value":10,"x":28.5,"y":176.1433883666992},{"value":20,"x":257.1867469879494,"y":176.1433883666992},{"value":30,"x":343.7168674698745,"y":176.1433883666992},{"value":40,"x":430.24698795180126,"y":176.1433883666992},{"value":80,"x":492.0542168674663,"y":176.1433883666992},{"value":100,"x":541.5,"y":176.1433883666992},{"value":50,"x":454.9698795180649,"y":88.0716941833496},{"value":60,"x":479.69277108433073,"y":88.0716941833496},{"value":70,"x":504.4156626505986,"y":88.0716941833496},{"value":90,"x":541.5,"y":88.0716941833496},{"value":110,"x":399.3433734939745,"y":264.2150825500488},{"value":120,"x":541.5,"y":264.2150825500488}]},{"name":"labels","values":[{"value":"A","x":541.5,"y":176.1433883666992},{"value":"B","x":541.5,"y":88.0716941833496},{"value":"C","x":541.5,"y":264.2150825500488}]}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 600, :height 370.8282, :padding {:top 10, :left 50, :bottom 20, :right 10}, :marks [{:type \"path\", :from {:data \"links\"}, :properties {:enter {:path {:field \"data.path\"}, :strokeWidth {:value 2}, :stroke {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}}}} {:type \"symbol\", :from {:data \"nodes\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :fill {:r {:field \"data.r\"}, :g {:field \"data.g\"}, :b {:field \"data.b\"}}, :fillOpacity {:value \"1\"}}, :update {:shape \"circle\", :size {:value 110}, :stroke [:value \"transparent\"]}}} {:type \"text\", :from {:data \"node-labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"center\"}, :dy {:value -20}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}} {:type \"text\", :from {:data \"labels\"}, :properties {:enter {:x {:field \"data.x\"}, :y {:field \"data.y\"}, :align {:value \"left\"}, :dx {:value 10}, :fontSize {:value 15}, :fill {:value \"black\"}}, :update {:text {:field \"data.value\"}}}}], :data [{:name \"nodes\", :values [{:value 10, :x 28.5, :y 176.1433883666992, :r 195, :g 160, :b 193} {:value 20, :x 257.1867469879494, :y 176.1433883666992, :r 195, :g 160, :b 193} {:value 30, :x 343.7168674698745, :y 176.1433883666992, :r 195, :g 160, :b 193} {:value 40, :x 430.24698795180126, :y 176.1433883666992, :r 195, :g 160, :b 193} {:value 80, :x 492.0542168674663, :y 176.1433883666992, :r 195, :g 160, :b 193} {:value 100, :x 541.5, :y 176.1433883666992, :r 195, :g 160, :b 193} {:value 50, :x 454.9698795180649, :y 88.0716941833496, :r 248, :g 50, :b 149} {:value 60, :x 479.69277108433073, :y 88.0716941833496, :r 248, :g 50, :b 149} {:value 70, :x 504.4156626505986, :y 88.0716941833496, :r 248, :g 50, :b 149} {:value 90, :x 541.5, :y 88.0716941833496, :r 248, :g 50, :b 149} {:value 110, :x 399.3433734939745, :y 264.2150825500488, :r 96, :g 134, :b 215} {:value 120, :x 541.5, :y 264.2150825500488, :r 96, :g 134, :b 215}]} {:name \"links\", :values [{:path \"M 28.500000424683094 176.1433883666992 L 257.1867397427559 176.1433883666992\", :r 195, :g 160, :b 193} {:path \"M 257.1867397427559 176.1433883666992 L 343.71685445308685 176.1433883666992\", :r 195, :g 160, :b 193} {:path \"M 343.71685445308685 176.1433883666992 L 430.2469861507416 176.1433883666992\", :r 195, :g 160, :b 193} {:path \"M 430.2469861507416 176.1433883666992 L 492.0542085170746 176.1433883666992\", :r 195, :g 160, :b 193} {:path \"M 492.0542085170746 176.1433883666992 L 541.4999932050705 176.1433883666992\", :r 195, :g 160, :b 193} {:path \"M 454.9698954820633 88.0716941833496 L 479.6927708387375 88.0716941833496\", :r 248, :g 50, :b 149} {:path \"M 479.6927708387375 88.0716941833496 L 504.4156461954117 88.0716941833496\", :r 248, :g 50, :b 149} {:path \"M 504.4156461954117 88.0716941833496 L 541.4999932050705 88.0716941833496\", :r 248, :g 50, :b 149} {:path \"M 399.3433749675751 264.2150825500488 L 541.4999932050705 264.2150825500488\", :r 96, :g 134, :b 215} {:path \"M 430.2469861507416 176.1433883666992 L 454.9698954820633 88.0716941833496\", :r 248, :g 50, :b 149} {:path \"M 257.1867397427559 176.1433883666992 L 399.3433749675751 264.2150825500488\", :r 96, :g 134, :b 215} {:path \"M 492.0542085170746 176.1433883666992 L 504.4156461954117 88.0716941833496\", :r 248, :g 50, :b 149}]} {:name \"node-labels\", :values [{:value 10, :x 28.5, :y 176.1433883666992} {:value 20, :x 257.1867469879494, :y 176.1433883666992} {:value 30, :x 343.7168674698745, :y 176.1433883666992} {:value 40, :x 430.24698795180126, :y 176.1433883666992} {:value 80, :x 492.0542168674663, :y 176.1433883666992} {:value 100, :x 541.5, :y 176.1433883666992} {:value 50, :x 454.9698795180649, :y 88.0716941833496} {:value 60, :x 479.69277108433073, :y 88.0716941833496} {:value 70, :x 504.4156626505986, :y 88.0716941833496} {:value 90, :x 541.5, :y 88.0716941833496} {:value 110, :x 399.3433734939745, :y 264.2150825500488} {:value 120, :x 541.5, :y 264.2150825500488}]} {:name \"labels\", :values [{:value \"A\", :x 541.5, :y 176.1433883666992} {:value \"B\", :x 541.5, :y 88.0716941833496} {:value \"C\", :x 541.5, :y 264.2150825500488}]}]}}"}
;; <=
